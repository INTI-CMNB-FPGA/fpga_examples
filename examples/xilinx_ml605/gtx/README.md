# Description

Using a GigaBit Transceiver (gtx with 2 data bytes and 8b10b codification) to change LEDs state with DIP switches.
* Byte 0 is the K28.5 character.
* Byte 1 is the state of DIP switches.

# Useful documents

* Virtex-6 FPGA GTX Transceivers User Guide (UG366)

# How to use resources

* This example uses the components *mmcm200to150* and *gbt1_gtx* generated by coregen (ISE DS 14.7).
* See wrapper.vhdl.
  * txoutclk is used to drive usrclk trough IBUFG.
  * The data exchange ports are tx_data, tx_isk, rx_data, rx_isk and ready.
  * When a byte of data is a K character, the corresponding isk bit must be 1.

# How to simulate

The testbench are only stimulus to see waveforms.

* This design needs ISE Design Suite with support and a valid license for Virtex 6 LXT 240.
* Prepare the environment to use ISE Isim. For example, run:
```
$ . /PATH_TO_ISE/ISE_DS/settings64.sh
```
* Prepare resources (skip this step if already generated):
```
$ make prepare
```
* Enter to testbench directory
```
$ cd testbench
```
* Compile
```
$ make
```
* See waveforms:
```
$ make see
```

See how when rxbyteisaligned is '1', the values in txdata and txcharisk arrive to rxdata and rxcharisk.

# How to run synthesis, implementation and programming

* This design needs ISE Design Suite with support and a valid license for Virtex 6 LXT 240.
* Prepare the environment to use ISE. For example, run:
```
$ . /PATH_TO_ISE/ISE_DS/settings64.sh
```
* Prepare resources (skip this step if already generated):
```
$ make prepare
```
* Run synthesis, implementation and bitstream generation:
```
$ make bit
```
* Use impact to transfer or, if fpga_helpers is installed, run:
```
$ make prog-fpga
```

# How to test on hardware

* Change DIP switches SW1.1..8 to see how the corresponding GPIO LED change its state.
* If two SMA cables are used to connect TX_P_O with RX_P_I and TX_N_O with RX_N_I, hold GPIO_SW_C to avoid internal loopback.
